import discord
import time
import asyncio
import psycopg2
import random
import discord
from discord.ext import commands


from discord.ui import Button, View
TOKEN = 'your_token'

id_log_channel = 1336338801378725978
id_loverooms_creator_channel = 1336407267842723940
id_mute_role = 1337166793013330010
id_ban_role = 1337177455282225172
id_pred_role = 1337180157479223407


bot = commands.Bot(command_prefix='!', intents = discord.Intents.all()) 

# –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞
@bot.event
async def on_ready():
    print(f'Logged in as {bot.user.name} ({bot.user.id})')

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –±–æ—Ç–∞
@bot.command()
async def ping(ctx):
    await ctx.response.send_message('pong')

@bot.command()
async def helpp(ctx):
    button_eco = Button(label='–≠–∫–æ–Ω–æ–º–∏–∫–∞')
    button_mod = Button(label='–ú–æ–¥–µ—Ä–∞—Ü–∏—è')

    button_list = View()
    button_list.add_item(button_eco)
    button_list.add_item(button_mod)

    async def ModCallback (interaction: discord.Integration):
        embed= discord.Embed(title="C–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥ –º–æ–¥–µ—Ä–∞—Ü–∏–∏", 
                    description=f"", 
                    color=discord.Color.blue())
        embed.add_field(name='', value='!clear <–∫–æ–ª-–≤–æ> - —É–¥–∞–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è', inline=False)
        embed.add_field(name='', value='!arrole user role - –≤—ã–¥–∞—á–∞/—Å–Ω—è—Ç–∏–µ —Ä–æ–ª–∏', inline=False)
        embed.add_field(name='', value='!mute user time reason <–∫–æ–ª-–≤–æ> - –≤—ã–¥–∞—á–∞ –º—É—Ç–∞', inline=False)
        embed.add_field(name='', value='!unmute user - —Å–Ω—è—Ç–∏–µ –º—É—Ç–∞', inline=False)
        embed.add_field(name='', value='!ban user reason - –≤—ã–¥–∞—á–∞ –±–∞–Ω–∞', inline=False)
        embed.add_field(name='', value='!unban user - —Å–Ω—è—Ç–∏–µ –±–∞–Ω–∞', inline=False)
        embed.add_field(name='', value='!pred user reason - –≤—ã–¥–∞—á–∞ –ø—Ä–µ–¥–∞', inline=False)
        embed.add_field(name='', value='!unpred user - —Å–Ω—è—Ç–∏–µ –ø—Ä–µ–¥–∞', inline=False)
        embed.set_footer(text=f"–í—ã–ø–æ–ª–Ω–∏–ª {ctx.author.name}",icon_url = ctx.author.avatar)
        await interaction.response.edit_message(embed = embed, view = button_list)
    
    async def EcoCallback (interaction: discord.Integration):
        embed= discord.Embed(title="C–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥ —ç–∫–æ–Ω–æ–º–∏–∫–∏", 
                    description=f"", 
                    color=discord.Color.blue())
        embed.add_field(name='', value='!profile user - –ø—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', inline=False)
        embed.add_field(name='', value='!lprofile user - –ø—Ä–æ—Å–º–æ—Ç—Ä –ª–∞–≤—Ä—É–º—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', inline=False)
        embed.add_field(name='', value='!deposit <–∫–æ–ª-–≤–æ>  - –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –º–æ–Ω–µ—Ç—ã –Ω–∞ —Å—á–µ—Ç –ª–∞–≤—Ä—É–º—ã', inline=False)
        embed.add_field(name='', value='!history user - –∏—Å—Ç–æ—Ä–∏—è –Ω–∞—Ä—É—à–µ–Ω–∏–π', inline=False)
        embed.add_field(name='', value='!award user <–∫–æ–ª-–≤–æ>  - –≤—ã–¥–∞—á–∞ –º–æ–Ω–µ—Ç', inline=False)
        embed.add_field(name='', value='!take user <–∫–æ–ª-–≤–æ> - —Å–Ω—è—Ç–∏–µ –º–æ–Ω–µ—Ç', inline=False)
        embed.add_field(name='', value='!coinflip <–∫–æ–ª-–≤–æ> <0 or 1> - –∏–≥—Ä–∞ –≤ –º–æ–Ω–µ—Ç–∫—É', inline=False)
        embed.add_field(name='', value='!marry user - –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –±—Ä–∞–∫–∞', inline=False)
        embed.set_footer(text=f"–í—ã–ø–æ–ª–Ω–∏–ª {ctx.author.name}",icon_url = ctx.author.avatar)
        await interaction.response.edit_message(embed = embed, view = button_list)
    
    button_mod.callback = ModCallback
    button_eco.callback = EcoCallback
    embed= discord.Embed(title="–í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–µ –≤–∞—Å –∫–æ–º–∞–Ω–¥—ã", 
                    description=f"", 
                    color=discord.Color.blue())
    embed.set_footer(text=f"–í—ã–ø–æ–ª–Ω–∏–ª {ctx.author.name}",icon_url = ctx.author.avatar)
    await ctx.send(embed = embed, view = button_list)

    await ctx.message.delete()

#------------------------------------------------------------------
#------------------------------–≠–ö–û–ù–û–ú–ò–ö–ê---------------------------
#------------------------------------------------------------------

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –ë–î –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
@bot.event
async def on_member_join(member:discord.member):
    conn = psycopg2.connect(dbname="history", host="127.0.0.1", user="postgres", password="postgres", port="5432")
    cursor = conn.cursor()

    try:
        cursor.execute(f"SELECT id FROM profile_user where id = '{member.id}'")
        new_list = cursor.fetchone()[0]
        print(new_list)
    except:
        query = f"INSERT INTO profile_user (id, online, message, money, time_join, love_room, love_id)VALUES({member.id},'0', '0', '0', {time.time()+7200}, '0', '0');"
        cursor.execute(query)
        conn.commit()
    
    conn.close()

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
@bot.command()
async def profile(ctx, member: discord.Member = '0'):
    if member == '0':
        member = ctx.author

    conn = psycopg2.connect(dbname="history", host="127.0.0.1", user="postgres", password="postgres", port="5432")
    cursor = conn.cursor()

    query = f"SELECT id, message, love_id, online, money FROM profile_user where id = '{member.id}'"
    cursor.execute(query)
    id_user, message, love_id, online, money = cursor.fetchone()
    love_room = '0'
    if love_id != 0:
        query = f"SELECT one_id, two_id FROM love_rooms where id = {love_id}"
        cursor.execute(query)
        one_id, two_id = cursor.fetchone()

        if one_id == id_user:
            love_room = two_id
        else:
            love_room = one_id

    embed= discord.Embed(title=f"–ü—Ä–æ—Ñ–∏–ª—å {member}", 
                        description=f"–û–±—â–∏–π –æ–Ω–ª–∞–π–Ω {online}\n–ë–∞–ª–∞–Ω—Å {money}\n –°–æ–æ–±—â–µ–Ω–∏–π {message}\n–ü–∞—Ä—Ç–Ω–µ—Ä {'–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç' if love_id == 0 else f"<@{love_room}>"}", 
                        color=discord.Color.blue())
    embed.set_footer(text=f"–í—ã–ø–æ–ª–Ω–∏–ª {ctx.author.name}",icon_url = ctx.author.avatar)
    await ctx.send(embed=embed)

    conn.close()

    await ctx.message.delete()

@bot.command()
async def deposit(ctx, money: int):
    conn = psycopg2.connect(dbname="history", host="127.0.0.1", user="postgres", password="postgres", port="5432")
    cursor = conn.cursor()

    query = f"SELECT money, love_id FROM profile_user where id = '{ctx.author.id}'"
    cursor.execute(query)
    user_money, love_id = cursor.fetchone()
    if love_id != 0:
        if money > user_money:
            await ctx.send("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥–≤ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ", delete_after = 3) 
        else:
            query = f"UPDATE profile_user SET money = money - {money} where id = '{ctx.author.id}'"
            cursor.execute(query)

            query = f"UPDATE love_rooms SET love_money = love_money + {money} where id = {love_id}"
            cursor.execute(query)
            conn.commit()

            embed= discord.Embed(title=f"–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –ª–∞–≤ —Ä—É–º—ã", 
                            description=f"<@{ctx.author.id}> –ø–æ–ø–æ–ª–Ω–∏–ª –±–∞–ª–∞–Ω—Å –ª–∞–≤ —Ä—É–º—ã –Ω–∞ {money}", 
                            color=discord.Color.blue())
            embed.set_footer(text=f"–í—ã–ø–æ–ª–Ω–∏–ª {ctx.author.name}",icon_url = ctx.author.avatar)
            await ctx.send(embed=embed)
    else:
        await ctx.send("–£ –≤–∞—Å –Ω–µ—Ç –ª–∞–≤ —Ä—É–º—ã", delete_after = 3) 

    conn.close()

    await ctx.message.delete()

# –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
@bot.command()
async def history(ctx, member: discord.Member = '0'):
    if member == '0':
        member = ctx.author
    
    conn = psycopg2.connect(dbname="history", host="127.0.0.1", user="postgres", password="postgres", port="5432")
    cursor = conn.cursor()

    query = f"SELECT author_id, reason, time, type FROM history_user where user_id = '{member.id}'"
    cursor.execute(query)
    user_punishments = cursor.fetchall()
    if len(user_punishments) == 0:
        embed= discord.Embed(title=f"–ò—Å—Ç–æ—Ä–∏—è –Ω–∞—Ä—É—à–µ–Ω–∏–π | {member}", 
                description=f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –µ—â–µ –Ω–µ –Ω–∞—Ä—É—à–∞–ª", 
                color=discord.Color.blue())
        embed.set_footer(text=f"–í—ã–ø–æ–ª–Ω–∏–ª {ctx.author.name}",icon_url = ctx.author.avatar)
        await ctx.send(embed=embed) 

    elif len(user_punishments) > 6:
        button_right = Button(label='>')
        button_left = Button(label='<')

        button_list = View()
        button_list.add_item(button_right)
        button_list.add_item(button_left)
    else:
        print("2")
        i = 0
        number_and_date = ''
        reason = ''
        author_id = ''
        mute_count = 0
        ban_count = 0
        while i < len(user_punishments):
            punishment = user_punishments[i]

            if punishment[3] == 'mute':
                type_ = 'üü•'
                mute_count = mute_count + 1
            elif punishment[3] == 'ban':
                type_ = 'üö´'
                ban_count = ban_count + 1
            elif punishment[3] == 'pred':
                type_ = '‚ö°'
            i_count = '#**' + str(i+1) + '**'
            i = i + 1
            number_and_date = number_and_date + i_count + type_ + f"<t:{punishment[2]}:d>" + '\n'
            reason = reason + f'{punishment[1]}' + '\n'
            author_id = author_id + f"<@{punishment[0]}>" + '\n'

        embed= discord.Embed(title=f"–ò—Å—Ç–æ—Ä–∏—è –Ω–∞—Ä—É—à–µ–Ω–∏–π | {member}", 
                description=f"–ó–∞ –≤—Å–µ –≤—Ä–µ–º—è {mute_count} –º—É—Ç–∞, {ban_count} –±–∞–Ω", 
                color=discord.Color.blue())
        embed.add_field(name = '```–ù–æ–º–µ—Ä / –î–∞—Ç–∞```', value=number_and_date, inline=True)
        embed.add_field(name = '```–ü—Ä–∏—á–∏–Ω–∞```', value=reason, inline=True)
        embed.add_field(name = '```–ò—Å–ø–æ–ª–∏—Ç–µ–ª—å```', value=author_id, inline=True)
        embed.set_footer(text=f"–í—ã–ø–æ–ª–Ω–∏–ª {ctx.author.name}",icon_url = ctx.author.avatar)

        print(author_id)
        await ctx.send(embed=embed)

    conn.close()

    await ctx.message.delete()

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–∞–≤ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
@bot.command()
async def lprofile(ctx, member: discord.Member = '0'):
    if member == '0':
        member = ctx.author
    
    conn = psycopg2.connect(dbname="history", host="127.0.0.1", user="postgres", password="postgres", port="5432")
    cursor = conn.cursor()

    query = f"SELECT love_id FROM profile_user where id = '{member.id}'"
    cursor.execute(query)
    love_id = cursor.fetchone()[0]

    query = f"SELECT one_id, two_id, love_online, love_money, date_create FROM love_rooms where id = {love_id}"
    cursor.execute(query)
    one_id, two_id, love_online, love_money, data_create = cursor.fetchone()

    one_user = ctx.guild.get_member(int(one_id))
    two_user = ctx.guild.get_member(int(two_id))

    days = int((time.time() - int(data_create)) / 3600 / 24)
    time_create = time.gmtime(int(data_create))
    time_create = time.strftime('%d.%m.%Y',time_create)

    embed= discord.Embed(title=f"–õ–∞–≤ –ø—Ä–æ—Ñ–∏–ª—å {one_user} –∏ {two_user}", 
                        description=f"–û–±—â–∏–π –æ–Ω–ª–∞–π–Ω {love_online}\n–ë–∞–ª–∞–Ω—Å {love_money}\n –î–Ω–µ–π {days}\n –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è {time_create}", 
                        color=discord.Color.blue())
    embed.set_footer(text=f"–í—ã–ø–æ–ª–Ω–∏–ª {ctx.author.name}",icon_url = ctx.author.avatar)
    await ctx.send(embed=embed)

    conn.close()

    await ctx.message.delete()

# –í—ã–¥–∞—á–∞ –º–æ–Ω–µ—Ç–æ–∫
@bot.command()
@commands.has_any_role(1336343109587435551)
async def award(ctx, member: discord.Member, money: int):
    conn = psycopg2.connect(dbname="history", host="127.0.0.1", user="postgres", password="postgres", port="5432")
    cursor = conn.cursor()

    query = f"UPDATE profile_user SET money = money + {money} WHERE id = '{member.id}' "
    cursor.execute(query, vars=None)
    conn.commit() 

    embed= discord.Embed(title="–í—ã–¥–∞—á–∞ –º–æ–Ω–µ—Ç–æ–∫", 
                    description=f"<@{ctx.author.id}> –≤—ã–¥–∞–ª <@{member.id}> {money} –º–æ–Ω–µ—Ç–æ–∫", 
                    color=discord.Color.blue())
    embed.set_footer(text=f"–í—ã–ø–æ–ª–Ω–∏–ª {ctx.author.name}",icon_url = ctx.author.avatar)
    await ctx.send(embed = embed)

    conn.close()

    await ctx.message.delete()

# –°–Ω—è—Ç–∏–µ –º–æ–Ω–µ—Ç–æ–∫
@bot.command()
@commands.has_any_role(1336343109587435551)
async def take(ctx, member: discord.Member, money: int):
    conn = psycopg2.connect(dbname="history", host="127.0.0.1", user="postgres", password="postgres", port="5432")
    cursor = conn.cursor()

    query = f"UPDATE profile_user SET money = money - {money} WHERE id = '{member.id}' "
    cursor.execute(query, vars=None)
    conn.commit() 

    embed= discord.Embed(title="–°–Ω—è—Ç–∏–µ –º–æ–Ω–µ—Ç–æ–∫", 
                    description=f"<@{ctx.author.id}> –∑–∞–±—Ä–∞ —É <@{member.id}> {money} –º–æ–Ω–µ—Ç–æ–∫", 
                    color=discord.Color.blue())
    embed.set_footer(text=f"–í—ã–ø–æ–ª–Ω–∏–ª {ctx.author.name}",icon_url = ctx.author.avatar)
    await ctx.send(embed = embed)

    conn.close()

    await ctx.message.delete()

# –ò–≥—Ä–∞ –≤ –º–æ–Ω–µ—Ç–∫—É
@bot.command()
@commands.has_any_role(1336343109587435551)
async def coinflip(ctx, money: int, rand: int):
    conn = psycopg2.connect(dbname="history", host="127.0.0.1", user="postgres", password="postgres", port="5432")
    cursor = conn.cursor()

    query = f"SELECT money FROM profile_user WHERE id = '{ctx.author.id}' "
    cursor.execute(query, vars=None)
    money_user = cursor.fetchone()[0]

    if money_user < money:
        await ctx.send("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤", delete_after = 3)
    else:
        random_ = random.randint(0, 1)
        if rand == random_:
            money = money * 2

            query = f"UPDATE profile_user SET money = money + {money} WHERE id = '{ctx.author.id}' "
            cursor.execute(query, vars=None)
            conn.commit() 

            embed= discord.Embed(title="–ú–æ–Ω–µ—Ç–∫–∞", 
                    description=f"–í—ã–ø–∞–ª–æ {random_}, –≤—ã –≤—ã–∏–≥—Ä–∞–ª–∏ {money}", 
                    color=discord.Color.blue())
            embed.set_footer(text=f"–í—ã–ø–æ–ª–Ω–∏–ª {ctx.author.name}",icon_url = ctx.author.avatar)
            await ctx.send(embed = embed)
        else:
            query = f"UPDATE profile_user SET money = money - {money} WHERE id = '{ctx.author.id}' "
            cursor.execute(query, vars=None)
            conn.commit() 

            embed= discord.Embed(title="–ú–æ–Ω–µ—Ç–∫–∞", 
                    description=f"–í—ã–ø–∞–ª–æ {random_}, –≤—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏ {money}", 
                    color=discord.Color.blue())
            embed.set_footer(text=f"–í—ã–ø–æ–ª–Ω–∏–ª {ctx.author.name}",icon_url = ctx.author.avatar)
            await ctx.send(embed = embed)

    conn.close()

    await ctx.message.delete()

# –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Å–æ–∑–¥–∞—Ç—å –õ–†
@bot.command()
async def marry(ctx, member: discord.Member):

    conn = psycopg2.connect(dbname="history", host="127.0.0.1", user="postgres", password="postgres", port="5432")
    cursor = conn.cursor()

    query = f"SELECT love_id, money FROM profile_user where id = '{ctx.author.id}'"
    cursor.execute(query)
    love_author, money = cursor.fetchone()

    query = f"SELECT love_id FROM profile_user where id = '{member.id}'"
    cursor.execute(query)
    love_member = cursor.fetchone()[0]

    if love_author != 0:
        await ctx.send(f"–£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –ª–∞–≤ —Ä—É–º–∞", delete_after = 3)
    elif love_member != 0:
        await ctx.send(f"–£ —á–µ–ª–æ–≤–µ–∫–∞ —É–∂–µ –µ—Å—Ç—å –ª–∞–≤—Ä—É–º–∞", delete_after = 3)
    elif ctx.author.id == member.id:
        await ctx.send(f"–ù–µ–ª—å–∑—è —Å–¥–µ–ª–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å–∞–º–æ–º—É —Å–µ–±–µ", delete_after = 3)
    elif money < 1000:
        await ctx.send(f"–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç–æ–∫", delete_after = 3)
    else: 
        embed= discord.Embed(title="–°–æ–∑–¥–Ω–∏–µ –ª–∞–≤ —Ä—É–º—ã", 
                    description=f"<@{ctx.author.id}> —Å–¥–µ–ª–∞–ª –ø—Ä–µ–¥–ª–æ–µ–∂–Ω–∏–µ <@{member.id}>", 
                    color=discord.Color.blue())
        embed.set_footer(text=f"–í—ã–ø–æ–ª–Ω–∏–ª {ctx.author.name}",icon_url = ctx.author.avatar)
        msg = await ctx.send(embed = embed)
        button_yes = Button(label='‚úÖ')
        button_no = Button(label='üö´')

        button_list = View()
        button_list.add_item(button_yes)
        button_list.add_item(button_no)

        async def YesCallback (interaction: discord.Integration):
            button_list.clear_items()
            await interaction.response.edit_message(content= "–í—ã –ø—Ä–∏–Ω—è–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ",view = button_list)
            
            time_now = int(time.time())
            query = f"INSERT INTO love_rooms (one_id, two_id, love_online, love_money, days, date_create)VALUES('{ctx.author.id}','{member.id}','0','0', '0','{time_now}'); "
            cursor.execute(query, vars=None)

            query = f"SELECT id FROM love_rooms WHERE one_id = '{ctx.author.id}' and two_id = '{member.id}'"
            cursor.execute(query, vars=None)
            id_love = cursor.fetchone()[0]

            query = f"UPDATE profile_user SET love_id = {id_love} WHERE id = '{ctx.author.id}' OR id = '{member.id}' "
            cursor.execute(query, vars=None)

            conn.commit() 

            embed= discord.Embed(title="–°–æ–∑–¥–Ω–∏–µ –ª–∞–≤ —Ä—É–º—ã", 
                        description=f"<@{ctx.author.id}> –∏ <@{member.id}> —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–ª–∏ –ª–∞–≤—Ä—É–º—É", 
                        color=discord.Color.blue())
            await msg.edit(embed = embed)

        async def NoCallback (interaction: discord.Integration):
            button_list.clear_items()
            await interaction.response.edit_message(content= "–í—ã –æ—Ç–∫–ª–æ–Ω–∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ",view = button_list)

        button_yes.callback = YesCallback
        button_no.callback = NoCallback

        await member.send(f"<@{ctx.author.id}> –ø—Ä–µ–¥–ª–æ–≥–∞–µ—Ç –≤–∞–º —Å–æ–∑–¥–∞—Ç—å –ª–∞–≤—Ä—É–º—É", view=button_list)

    conn.close()

    await ctx.message.delete()

# –ü–æ–¥—Å—á–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è –≤ –≤–æ–π—Å–µ 
@bot.event
async def on_voice_state_update(member: discord.Member, before, after):
    conn = psycopg2.connect(dbname="history", host="127.0.0.1", user="postgres", password="postgres", port="5432")
    cursor = conn.cursor()
    if before.channel is None and after.channel is not None:
        time_join = int(time.time())

        query = f"UPDATE profile_user SET time_join_voice = {time_join} WHERE id = '{member.id}'"
        cursor.execute(query)
    elif before.channel is not None and after.channel is None:
        time_exit = int(time.time())
        
        query = f"SELECT time_join_voice FROM profile_user WHERE id = '{member.id}'"
        cursor.execute(query, vars=None)
        time_join = cursor.fetchone()[0]

        query = f"SELECT online FROM profile_user WHERE id = '{member.id}'"
        cursor.execute(query, vars=None)
        time_online = cursor.fetchone()[0]

        time_online = int(time_online) + time_exit - int(time_join)
        query = f"UPDATE profile_user SET online = {time_online} WHERE id = '{member.id}'"
        cursor.execute(query, vars=None)

        conn.commit() 
    
    channel = bot.get_channel(id_loverooms_creator_channel)
    #if after.channel == channel:
        
    conn.close()

#------------------------------------------------------------------
#------------------------------–ú–û–î–ï–†–ê–¶–ò–Ø---------------------------
#------------------------------------------------------------------

# –£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç–µ
@bot.command( pass_context = True )
@commands.has_any_role(1336343109587435551)
async def clear(ctx, amount = 1 ):
    if amount < 1 or amount > 100:
        await ctx.send("–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 1 –¥–æ 100", delete_after = 3)
        await ctx.message.delete()
    else:
        channel = bot.get_channel(id_log_channel)
        await ctx.message.delete()
        await ctx.channel.purge( limit = amount )
        # –†–µ–∞–∫—Ü–∏—è –Ω–∞ –∫–æ–º–∞–Ω–¥—É
        embed= discord.Embed(title="–£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π", 
                            description=f"–ë—ã–ª–æ —É–¥–∞–ª–µ–Ω–æ {amount} —Å–æ–æ–±—â–µ–Ω–∏–π", 
                            color=discord.Color.blue())
        embed.set_footer(text=f"–í—ã–ø–æ–ª–Ω–∏–ª {ctx.author.name}",icon_url = ctx.author.avatar)
        await ctx.send(embed=embed, delete_after = 3)
        # –õ–æ–≥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∫–æ–º–∞–Ω–¥—ã
        embed= discord.Embed(title="–£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π", 
                            description=f"<@{ctx.author.id}> —É–¥–∞–ª–∏–ª {amount} —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∫–∞–Ω–∞–ª–µ <#{ctx.channel.id}>", 
                            color=discord.Color.blue())
        await channel.send(embed=embed)

# –í—ã–¥–∞—á–∞/—Å–Ω—è—Ç–∏–µ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
@bot.command()
@commands.has_any_role(1336343109587435551)
async def arrole(ctx, member: discord.Member, role: discord.Role):
    channel = bot.get_channel(id_log_channel)
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞–π–≤—ã—Å—à–µ–π —Ä–æ–ª–∏ –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä–∞ –∫–æ–º–∞–Ω–¥—ã –∏ —Ä–æ–ª–∏ –∫–æ—Ç–æ—Ä—É—é –æ–Ω –≤—ã–¥–µ—Ç
    if ctx.guild.roles.index(ctx.author.roles[len(ctx.author.roles)-1]) > ctx.guild.roles.index(role):
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Ä–æ–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        if role not in member.roles:
            await member.add_roles(role)
            # –†–µ–∞–∫—Ü–∏—è –Ω–∞ –∫–æ–º–∞–Ω–¥—É
            embed= discord.Embed(title="–í—ã–¥–∞—á–∞ —Ä–æ–ª–∏", 
                                description=f"–†–æ–ª—å <@&{role.id}> –±—ã–ª–∞ –≤—ã–¥–∞–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é <@{member.id}>", 
                                color=discord.Color.blue())
            await ctx.send(embed=embed)
            # –õ–æ–≥ —Ä–µ–∑—É–ª—å–∞—Ç–∞—Ç –∫–æ–º–∞–Ω–¥—ã
            embed= discord.Embed(title="–í—ã–¥–∞—á–∞ —Ä–æ–ª–∏", 
                                description=f"<@{ctx.author.id}> –≤—ã–¥–∞–ª —Ä–æ–ª—å <@&{role.id}> —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è <@{member.id}>", 
                                color=discord.Color.blue())
            await channel.send(embed=embed)
        else:
            await member.remove_roles(role)
            # –†–µ–∞–∫—Ü–∏—è –Ω–∞ –∫–æ–º–∞–Ω–¥—É
            embed= discord.Embed(title="–°–Ω—è—Ç–∏–µ —Ä–æ–ª–∏", 
                                description=f"–†–æ–ª—å <@&{role.id}> –±—ã–ª–∞ —Å–Ω—è—Ç–∞ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è <@{member.id}>", 
                                color=discord.Color.blue())
            await ctx.send(embed=embed)
            # –õ–æ–≥ —Ä–µ–∑—É–ª—å–∞—Ç–∞—Ç –∫–æ–º–∞–Ω–¥—ã
            embed= discord.Embed(title="–°–Ω—è—Ç–∏–µ —Ä–æ–ª–∏", 
                                description=f"<@{ctx.author.id}> —Å–Ω—è–ª —Ä–æ–ª—å <@&{role.id}> —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è <@{member.id}>",
                                color=discord.Color.blue())
            await channel.send(embed=embed)
    else:
        await ctx.send(f"–í–∞—à–∞ –ø–æ–∑–∏—Ü–∏—è –≤ —Å—Ç–∞—Ñ–µ –Ω–∏–∂–µ —É–∫–∞–∑–∞–Ω–æ–π —Ä–æ–ª–∏", delete_after = 3)

    await ctx.message.delete()

# –í—ã–¥–∞—á–∞ –º—É—Ç–∞
@bot.command()
@commands.has_any_role(1336343109587435551)
async def mute(ctx, member: discord.Member, time_mute: int, reason):

    conn = psycopg2.connect(dbname="history", host="127.0.0.1", user="postgres", password="postgres", port="5432")
    cursor = conn.cursor()

    role = ctx.guild.get_role(id_mute_role)
    role_pred = ctx.guild.get_role(id_pred_role)
    if role not in member.roles:
        channel = bot.get_channel(id_log_channel)
        # –í—ã–¥–∞—á–∞ –º—É—Ç–∞
        embed= discord.Embed(title="–í—ã–¥–∞—á–∞ –º—É—Ç–∞", 
                            description=f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é <@{member.id}> –≤—ã–¥–∞–ª–∏ –º—É—Ç!\n–í—Ä–µ–º—è –ø—Ä–æ–±—ã–≤–∞–Ω–∏—è –≤ –º—É—Ç–µ: {time_mute} –º–∏–Ω—É—Ç\n```–ü—Ä–∏—á–∏–Ω–∞: {reason}!```",
                            color=discord.Color.blue())
        embed.set_footer(text=f"–í—ã–ø–æ–ª–Ω–∏–ª {ctx.author.name}",icon_url = ctx.author.avatar)
        await ctx.send(embed=embed)
        # –°–æ–æ–±—â–µ–Ω–∏–µ –≤ –ª—Å –æ –º—É—Ç–µ
        embed= discord.Embed(title="–í—ã–¥–∞—á–∞ –º—É—Ç–∞", 
                            description=f"–í–∞–º –≤—ã–¥–∞–ª–∏ –º—É—Ç –Ω–∞ {time_mute} –º–∏–Ω—É—Ç\n```–ü—Ä–∏—á–∏–Ω–∞: {reason}!```",
                            color=discord.Color.blue())
        embed.set_footer(text=f"{ctx.guild.name} ‚Ä¢ {ctx.author.name}",icon_url = ctx.author.avatar)
        await member.send(embed=embed)
        # –õ–æ–≥ –º—É—Ç–∞
        embed= discord.Embed(title="–í—ã–¥–∞—á–∞ –º—É—Ç–∞", 
                            description=f"–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä <@{ctx.author.id}> –≤—ã–¥–∞–ª –º—É—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–æ—é <@{member.id}> –Ω–∞ {time_mute} –º–∏–Ω—É—Ç\n```–ü—Ä–∏—á–∏–Ω–∞: {reason}!```",
                            color=discord.Color.blue())
        embed.set_footer(text=f"–í—ã–ø–æ–ª–Ω–∏–ª {ctx.author.name}",icon_url = ctx.author.avatar)
        await channel.send(embed=embed)
        if role_pred in member.roles:
            await member.remove_roles(role_pred)
        await member.add_roles(role)

        query = f"INSERT INTO history_user (user_id, author_id, reason, time, type)VALUES('{member.id}','{ctx.author.id}','{reason}','{int(time.time())}', 'mute'); "
        cursor.execute(query, vars=None)

        conn.commit()
        conn.close()

        await asyncio.sleep(int(time_mute * 60))
        print("123")
        if role in member.roles:
            # –°–æ–æ–±—â–µ–Ω–∏–µ –≤ –ª—Å –æ —Å–Ω—è—Ç–∏–∏ –º—É—Ç–µ
            embed= discord.Embed(title="–°–Ω—è—Ç–∏–µ –º—É—Ç–∞", 
                                description=f"–í—Ä–µ–º—è –º—É—Ç–∞ –∏—Å—Ç–µ–∫–ª–æ, –Ω–∞–∫–∞–∑–∞–Ω–∏–µ —Å–Ω—è—Ç–æ",
                                color=discord.Color.blue())
            embed.set_footer(text=f"{ctx.guild.name} ‚Ä¢ {ctx.author.name}",icon_url = ctx.author.avatar)
            await member.send(embed=embed)
            # –õ–æ–≥ –∞–Ω–º—É—Ç–∞
            embed= discord.Embed(title="–°–Ω—è—Ç–∏–µ –º—É—Ç–∞", 
                            description=f"–í—Ä–µ–º—è –º—É—Ç–∞ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è <@{member.id}> –∏—Å—Ç–µ–∫–ª–æ, –Ω–∞–∫–∞–∑–∞–Ω–∏–µ —Å–Ω—è—Ç–æ",
                            color=discord.Color.blue())
            embed.set_footer(text=ctx.author.name,icon_url = ctx.author.avatar)
            await channel.send(embed=embed)
            await member.remove_roles(role)
    else:
        await ctx.send(f"–£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–∂–µ –µ—Å—Ç—å –º—É—Ç", delete_after = 5)

    await ctx.message.delete()

# –°–Ω—è—Ç–∏–µ –º—É—Ç–∞
@bot.command()
@commands.has_any_role(1336343109587435551)
async def unmute(ctx, member: discord.Member):
    role = ctx.guild.get_role(id_mute_role)
    if role in member.roles:
        channel = bot.get_channel(id_log_channel)
        # –°–Ω—è—Ç–∏–µ –º—É—Ç–∞
        embed= discord.Embed(title="–°–Ω—è—Ç–∏–µ –º—É—Ç–∞", 
                            description=f"–ú—É—Ç —É –ø–æ–ª—é–∑–æ–≤–∞—Ç–µ–ª—è <@{member.id}> –±—ã–ª —Å–Ω—è—Ç",
                            color=discord.Color.blue())
        embed.set_footer(text=f"–í—ã–ø–æ–ª–Ω–∏–ª {ctx.author.name}",icon_url = ctx.author.avatar)
        await ctx.send(embed=embed)
        # –°–æ–æ–±—â–µ–Ω–∏–µ –≤ –ª—Å –æ —Å–Ω—è—Ç–∏–∏ –º—É–º—Ç–∞
        embed= discord.Embed(title="–°–Ω—è—Ç–∏–µ –º—É—Ç–∞", 
                            description=f"–ú—É—Ç –±—ã–ª —Å–Ω—è—Ç",
                            color=discord.Color.blue())
        embed.set_footer(text=f"{ctx.guild.name} ‚Ä¢ {ctx.author.name}",icon_url = ctx.author.avatar)
        await member.send(embed=embed)
        # –õ–æ–≥ –∞–Ω–º—É—Ç–∞
        embed= discord.Embed(title="–°–Ω—è—Ç–∏–µ –º—É—Ç–∞", 
                            description=f"<@{ctx.author.id}> —Å–Ω—è–ª –º—É—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é <@{member.id}>",
                            color=discord.Color.blue())
        embed.set_footer(text=f"–í—ã–ø–æ–ª–Ω–∏–ª {ctx.author.name}",icon_url = ctx.author.avatar)
        await channel.send(embed=embed)
        await member.remove_roles(role)
    else:
        await ctx.send(f"–£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç—É –º—É—Ç–∞", delete_after = 5)

    await ctx.message.delete()

# –í—ã–¥–∞—á–∞ –±–∞–Ω–∞
@bot.command()
@commands.has_any_role(1336343109587435551)
async def ban(ctx, member: discord.Member, reason):

    conn = psycopg2.connect(dbname="history", host="127.0.0.1", user="postgres", password="postgres", port="5432")
    cursor = conn.cursor()

    role = ctx.guild.get_role(id_ban_role)
    if role not in member.roles:
        channel = bot.get_channel(id_log_channel)
        # –í—ã–¥–∞—á–∞ –±–∞–Ω–∞
        embed= discord.Embed(title="–í—ã–¥–∞—á–∞ –±–∞–Ω–∞", 
                            description=f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é <@{member.id}> –≤—ã–¥–∞–ª–∏ –±–∞–Ω!\n```–ü—Ä–∏—á–∏–Ω–∞: {reason}!```",
                            color=discord.Color.blue())
        embed.set_footer(text=f"–í—ã–ø–æ–ª–Ω–∏–ª {ctx.author.name}",icon_url = ctx.author.avatar)
        await ctx.send(embed=embed)
        # –°–æ–æ–±—â–µ–Ω–∏–µ –≤ –ª—Å –æ –±–∞–Ω–µ
        embed= discord.Embed(title="–í—ã–¥–∞—á–∞ –±–∞–Ω–∞", 
                            description=f"–í–∞–º –≤—ã–¥–∞–ª–∏ –±–∞–Ω```–ü—Ä–∏—á–∏–Ω–∞: {reason}!```",
                            color=discord.Color.blue())
        embed.set_footer(text=f"{ctx.guild.name} ‚Ä¢ {ctx.author.name}",icon_url = ctx.author.avatar)
        await member.send(embed=embed)
        # –õ–æ–≥ –±–∞–Ω–∞
        embed= discord.Embed(title="–í—ã–¥–∞—á–∞ –±–∞–Ω–∞", 
                            description=f"–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä <@{ctx.author.id}> –≤—ã–¥–∞–ª –±–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–æ—é <@{member.id}>\n```–ü—Ä–∏—á–∏–Ω–∞: {reason}!```",
                            color=discord.Color.blue())
        embed.set_footer(text=f"–í—ã–ø–æ–ª–Ω–∏–ª {ctx.author.name}",icon_url = ctx.author.avatar)
        await channel.send(embed=embed)
        await member.add_roles(role)

        query = f"INSERT INTO history_user (user_id, author_id, reason, time, type)VALUES('{member.id}','{ctx.author.id}','{reason}','{int(time.time())}', 'ban'); "
        cursor.execute(query, vars=None)

        conn.commit()
        conn.close()
    else:
        await ctx.send(f"–£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–∂–µ –µ—Å—Ç—å –±–∞–Ω", delete_after = 5)

    await ctx.message.delete()

# –°–Ω—è—Ç–∏–µ –±–∞–Ω–∞
@bot.command()
@commands.has_any_role(1336343109587435551)
async def unban(ctx, member: discord.Member):
    role = ctx.guild.get_role(id_ban_role)
    if role in member.roles:
        channel = bot.get_channel(id_log_channel)
        # –°–Ω—è—Ç–∏–µ –±–∞–Ω–∞
        embed= discord.Embed(title="–°–Ω—è—Ç–∏–µ –±–∞–Ω–∞", 
                            description=f"–ë–∞–Ω —É –ø–æ–ª—é–∑–æ–≤–∞—Ç–µ–ª—è <@{member.id}> –±—ã–ª —Å–Ω—è—Ç",
                            color=discord.Color.blue())
        embed.set_footer(text=f"–í—ã–ø–æ–ª–Ω–∏–ª {ctx.author.name}",icon_url = ctx.author.avatar)
        await ctx.send(embed=embed)
        # –°–æ–æ–±—â–µ–Ω–∏–µ –≤ –ª—Å –æ —Å–Ω—è—Ç–∏–∏ –±–∞–Ω–∞
        embed= discord.Embed(title="–°–Ω—è—Ç–∏–µ –±–∞–Ω–∞", 
                            description=f"–ë–∞–Ω –±—ã–ª —Å–Ω—è—Ç",
                            color=discord.Color.blue())
        embed.set_footer(text=f"{ctx.guild.name} ‚Ä¢ {ctx.author.name}",icon_url = ctx.author.avatar)
        await member.send(embed=embed)
        # –õ–æ–≥ –∞–Ω–±–∞–Ω–∞
        embed= discord.Embed(title="–°–Ω—è—Ç–∏–µ –±–∞–Ω–∞", 
                             description=f"<@{ctx.author.id}> —Å–Ω—è–ª –±–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é <@{member.id}>",
                            color=discord.Color.blue())
        embed.set_footer(text=f"–í—ã–ø–æ–ª–Ω–∏–ª {ctx.author.name}",icon_url = ctx.author.avatar)
        await channel.send(embed=embed)
        await member.remove_roles(role)
    else:
        await ctx.send(f"–£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç—É –±–∞–Ω–∞", delete_after = 5)

    await ctx.message.delete()

# –í—ã–¥–∞—á–∞ –ø—Ä–µ–¥–∞
@bot.command()
@commands.has_any_role(1336343109587435551)
async def pred(ctx, member: discord.Member, reason):

    conn = psycopg2.connect(dbname="history", host="127.0.0.1", user="postgres", password="postgres", port="5432")
    cursor = conn.cursor()

    role = ctx.guild.get_role(id_pred_role)
    if role not in member.roles:
        channel = bot.get_channel(id_log_channel)
        # –í—ã–¥–∞—á–∞ –ø—Ä–µ–¥–∞
        embed= discord.Embed(title="–í—ã–¥–∞—á–∞ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è", 
                            description=f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é <@{member.id}> –≤—ã–¥–∞–ª–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –Ω–∞ 12 —á–∞—Å–æ–≤!\n```–ü—Ä–∏—á–∏–Ω–∞: {reason}!```",
                            color=discord.Color.blue())
        embed.set_footer(text=f"–í—ã–ø–æ–ª–Ω–∏–ª {ctx.author.name}",icon_url = ctx.author.avatar)
        await ctx.send(embed=embed)
        # –°–æ–æ–±—â–µ–Ω–∏–µ –≤ –ª—Å –æ –ø—Ä–µ–¥–µ
        embed= discord.Embed(title="–í—ã–¥–∞—á–∞ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è", 
                            description=f"–í–∞–º –≤—ã–¥–∞–ª–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –Ω–∞ 12 —á–∞—Å–æ–≤```–ü—Ä–∏—á–∏–Ω–∞: {reason}!```",
                            color=discord.Color.blue())
        embed.set_footer(text=f"{ctx.guild.name} ‚Ä¢ {ctx.author.name}",icon_url = ctx.author.avatar)
        await member.send(embed=embed)
        # –õ–æ–≥ –ø—Ä–µ–¥–∞
        embed= discord.Embed(title="–í—ã–¥–∞—á–∞ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è", 
                             description=f"–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä <@{ctx.author.id}> –≤—ã–¥–∞–ª –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –Ω–∞ 12 —á–∞—Å–∞–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–æ—é <@{member.id}>\n```–ü—Ä–∏—á–∏–Ω–∞: {reason}!```",
                            color=discord.Color.blue())
        embed.set_footer(text=f"–í—ã–ø–æ–ª–Ω–∏–ª {ctx.author.name}",icon_url = ctx.author.avatar)
        await channel.send(embed=embed)
        await member.add_roles(role)

        query = f"INSERT INTO history_user (user_id, author_id, reason, time, type)VALUES('{member.id}','{ctx.author.id}','{reason}','{int(time.time())}', 'pred'); "
        cursor.execute(query, vars=None)

        conn.commit()
        conn.close()

        await asyncio.sleep(12 * 3600)
        if role in member.roles:
            # –°–æ–æ–±—â–µ–Ω–∏–µ –≤ –ª—Å –æ —Å–Ω—è—Ç–∏–∏ –ø—Ä–µ–¥–∞
            embed= discord.Embed(title="–°–Ω—è—Ç–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è", 
                                description=f"–í—Ä–µ–º—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏—Å—Ç–µ–∫–ª–æ, –Ω–∞–∫–∞–∑–∞–Ω–∏–µ —Å–Ω—è—Ç–æ",
                                color=discord.Color.blue())
            embed.set_footer(text=ctx.guild.name)
            await member.send(embed=embed)
            # –õ–æ–≥ –∞–Ω–ø—Ä–µ–¥–∞
            embed= discord.Embed(title="–°–Ω—è—Ç–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è", 
                             description=f"–í—Ä–µ–º—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è <@{member.id}> –∏—Å—Ç–µ–∫–ª–æ, –Ω–∞–∫–∞–∑–∞–Ω–∏–µ —Å–Ω—è—Ç–æ",
                            color=discord.Color.blue())
            embed.set_footer(text=ctx.author.name,icon_url = ctx.author.avatar)
            await channel.send(embed=embed)
            await member.remove_roles(role)
    else:
        await ctx.send(f"–£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–∂–µ –µ—Å—Ç—å –ø—Ä–µ–¥", delete_after = 5)

    await ctx.message.delete()

# –°–Ω—è—Ç–∏–µ –ø—Ä–µ–¥–∞
@bot.command()
@commands.has_any_role(1336343109587435551)
async def unpred(ctx, member: discord.Member):
    role = ctx.guild.get_role(id_pred_role)
    if role in member.roles:
        channel = bot.get_channel(id_log_channel)
        # –°–Ω—è—Ç–∏–µ –ø—Ä–µ–¥–∞
        embed= discord.Embed(title="–°–Ω—è—Ç–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è", 
                            description=f"–ü—Ä–µ–¥—É–ø—Ä–µ–∂–µ–¥–Ω–∏–µ —É –ø–æ–ª—é–∑–æ–≤–∞—Ç–µ–ª—è <@{member.id}> –±—ã–ª–æ —Å–Ω—è—Ç–æ",
                            color=discord.Color.blue())
        embed.set_footer(text=f"–í—ã–ø–æ–ª–Ω–∏–ª {ctx.author.name}",icon_url = ctx.author.avatar)
        await ctx.send(embed=embed)
        # –°–æ–æ–±—â–µ–Ω–∏–µ –≤ –ª—Å –æ —Å–Ω—è—Ç–∏–∏ –ø—Ä–µ–¥–∞
        embed= discord.Embed(title="–°–Ω—è—Ç–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è", 
                            description=f"–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –±—ã–ª–æ —Å–Ω—è—Ç–æ",
                            color=discord.Color.blue())
        embed.set_footer(text=f"{ctx.guild.name} ‚Ä¢ {ctx.author.name}",icon_url = ctx.author.avatar)
        await member.send(embed=embed)
        # –õ–æ–≥ –∞–Ω–ø—Ä–µ–¥–∞
        embed= discord.Embed(title="–°–Ω—è—Ç–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è", 
                            description=f"<@{ctx.author.id}> —Å–Ω—è–ª –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é <@{member.id}>",
                            color=discord.Color.blue())
        embed.set_footer(text=f"–í—ã–ø–æ–ª–Ω–∏–ª {ctx.author.name}",icon_url = ctx.author.avatar)
        await channel.send(embed=embed)
        await member.remove_roles(role)
    else:
        await ctx.send(f"–£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç—É –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è", delete_after = 5)

    await ctx.message.delete()

bot.run(TOKEN)
